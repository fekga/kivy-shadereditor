{"shader": {"fragment": "uniform float time;\nuniform vec2 resolution;\nuniform vec2 mouse;\n\nconst float pi = 3.141569;\nconst float pi2 = pi*2.;\nconst float pi_2 = pi/2.;\n\n#define min3(a,b,c) min(a,min(b,c))\n#define sin1(a) (sin(a)*.5+.5)\n#define cos1(a) (cos(a)*.5+.5)\n#define saw1(x) (abs(fract(x)*2.-1.)\n#define saw(x)  (abs(fract(x)*4.-2.)-1.)\n\nvec2 c_mult (vec2 a, vec2 b)\n{\n\treturn vec2(a.x*b.x-a.y*b.y,a.x*b.y+b.x*a.y);\n}\n\nvec2 c_conj (vec2 a)\n{\n\treturn vec2(a.x, -a.y);\n}\n\nvec2 c_inv (vec2 a)\n{\n\treturn c_conj(a) / dot(a, a);\n}\n\nvec2 c_div (vec2 a, vec2 b)\n{\n\treturn mat2(a,a.y,-a.x)*b/dot(b,b);\n}\n\nvec2 c_exp (vec2 a)\n{\n\treturn exp(z.x)*vec2(cos(z.y),sin(z.y));\n}\n\nvec2 tr(vec2 p)\n{\n\tp/=resolution.xy;\n\tp=-1.+2.*p;\n\tp.x *=resolution.x/resolution.y;\n\treturn p;\n}\n\nfloat hash( float n )\n{\n    return fract(sin(n)*43758.5453123);\n}\n\nfloat noise( in vec2 x )\n{\n    vec2 p = floor(x);\n    vec2 f = fract(x);\n    f = f*f*(3.0-2.0*f);\n    float n = p.x + p.y*157.0;\n    return mix(mix( hash(n+  0.0), hash(n+  1.0),f.x),\n               mix( hash(n+157.0), hash(n+158.0),f.x),f.y);\n}\n\nconst mat2 m2 = mat2( 0.80, -0.60, 0.60, 0.80 );\n\nfloat fbm( vec2 p )\n{\n    float f = 0.0;\n    f += 0.5000*noise( p ); p = m2*p*2.02;\n    f += 0.2500*noise( p ); p = m2*p*2.03;\n    f += 0.1250*noise( p ); p = m2*p*2.01;\n    f += 0.0625*noise( p );\n    return f/0.9375;\n}\n\nfloat smin( float a, float b, float k )\n{\n\tfloat res = exp( -k*a ) + exp( -k*b );\n\treturn -log( res )/k;\n}\n\nmat2 rot(float a)\n{\n\tfloat c=cos(a),s=sin(a);\n\treturn mat2(c,-s,s,c);\n}\n\nvec2 F(vec2 p)\n{\n\tp = c_mul(p,vec2(.0,1.);\n\treturn (c_exp(p) - c_exp(-p)*.5);\n}\n\nvec2 dF(vec2 p)\n{\n\tp = c_mul(p,vec2(.0,1.);\n\treturn (c_exp(p) + c_exp(-p)*.5);\n}\n\nvec3 fractal(vec2 z, vec2 p, float iter)\n{\n\tfloat i = .0;\n\tfor(i=.0;i<iter;i++)\n\t{\n\t\tz = z - c_div(F(z), dF(z));\n\t\tif (length(F(z)) < 1e-5)\n\t\t\tbreak;\n\t}\n\t\n\treturn vec3(z,i/iter);\n}\n\nvoid main( void )\n{\n\tvec2 p = tr(gl_FragCoord.xy);\n\tvec3 col=vec3(.0);\n\n\tp*=rot(time*.2);\n\tp*=exp(-time*.1);\n\tvec3 frac = fractal(p,tr(mouse),150.);\n\tvec2 z = frac.xy;\n\tfloat iter = frac.z;\n//\titer += time*.2;\n\tcol += iter;\n\n\tcol = pow(col,vec3(.85));\n\tgl_FragColor = vec4(col,1.);\n}"}}